const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["strapi-Ce0-1BU9.js","strapi-D6821bIJ.css"])))=>i.map(i=>d[i]);
import{fe as O,ff as U,fg as $,fh as G,fi as D,fj as H,fk as K,aP as V,fl as W,fm as R,fn as Z,r as j,a3 as z,dj as J,ak as Y,k as q,fo as I,bz as Q,M as X,a as B,b as ss,aN as ns,bS as es,j as e,dY as p,bo as N,fp as as,l as ts,a5 as is,aJ as rs,dZ as os,P as k,aO as ls,L as cs,Z as ds,ck as P,bx as us,d_ as ms}from"./strapi-Ce0-1BU9.js";import{_ as gs}from"./_baseMap-2sOOFgso.js";import{s as ps}from"./selectors-ByZXWa2E.js";import"./_baseEach-EQAZuPTg.js";function fs(n,s){var a=n.length;for(n.sort(s);a--;)n[a]=n[a].value;return n}var bs=fs,A=O;function hs(n,s){if(n!==s){var a=n!==void 0,o=n===null,d=n===n,i=A(n),c=s!==void 0,g=s===null,u=s===s,m=A(s);if(!g&&!m&&!i&&n>s||i&&c&&u&&!g&&!m||o&&c&&u||!a&&u||!d)return 1;if(!o&&!i&&!m&&n<s||m&&a&&d&&!o&&!i||g&&a&&d||!c&&d||!u)return-1}return 0}var xs=hs,js=xs;function _s(n,s,a){for(var o=-1,d=n.criteria,i=s.criteria,c=d.length,g=a.length;++o<c;){var u=js(d[o],i[o]);if(u){if(o>=g)return u;var m=a[o];return u*(m=="desc"?-1:1)}}return n.index-s.index}var Ls=_s,E=$,Ss=D,Ms=K,ys=gs,ks=bs,Ps=H,Es=Ls,ws=U,Ns=G;function As(n,s,a){s.length?s=E(s,function(i){return Ns(i)?function(c){return Ss(c,i.length===1?i[0]:i)}:i}):s=[ws];var o=-1;s=E(s,Ps(Ms));var d=ys(n,function(i,c,g){var u=E(s,function(m){return m(i)});return{criteria:u,index:++o,value:i}});return ks(d,function(i,c){return Es(i,c,a)})}var Cs=As,Ts=Z,Bs=Cs,vs=W,C=R,Fs=vs(function(n,s){if(n==null)return[];var a=s.length;return a>1&&C(n,s[0],s[1])?s=[]:a>2&&C(s[0],s[1],s[2])&&(s=[s[0]]),Bs(n,Ts(s,1),[])}),Os=Fs;const Us=V(Os),$s=n=>n.map(s=>{const a=s.links.map(o=>({...o,isDisplayed:!1}));return{...s,links:a}}),v=()=>{const[{isLoading:n,menu:s},a]=j.useState({isLoading:!0,menu:[]}),o=z("useSettingsMenu",r=>r.checkUserHasPermissions),d=J("useSettingsMenu",r=>r.shouldUpdateStrapi),i=Y("useSettingsMenu",r=>r.settings),c=q(ps),g=j.useMemo(()=>I(),[]),{admin:u,global:m}=Q(g,async()=>(await X(async()=>{const{SETTINGS_LINKS_EE:r}=await import("./strapi-Ce0-1BU9.js").then(t=>t.jM);return{SETTINGS_LINKS_EE:r}},__vite__mapDeps([0,1]))).SETTINGS_LINKS_EE(),{combine(r,t){return{admin:[...t.admin,...r.admin],global:[...r.global,...t.global]}},defaultValue:{admin:[],global:[]}}),f=j.useCallback(r=>{if(!r.id)throw new Error("The settings menu item must have an id attribute.");return{...r,permissions:c.settings?.[r.id]?.main??[]}},[c.settings]);return j.useEffect(()=>{const r=async()=>{const F=await(_=>Promise.all(_.reduce((h,L,S)=>{const M=L.links.map(async(y,x)=>({hasPermission:(await o(y.permissions)).length>0,sectionIndex:S,linkIndex:x}));return[...h,...M]},[])))(w);a(_=>({..._,isLoading:!1,menu:w.map((h,L)=>({...h,links:h.links.map((S,M)=>{const y=F.find(x=>x.sectionIndex===L&&x.linkIndex===M);return{...S,isDisplayed:!!y?.hasPermission}})}))}))},{global:t,...l}=i,w=$s([{...t,links:Us([...t.links,...m.map(f)],b=>b.id).map(b=>({...b,hasNotification:b.id==="000-application-infos"&&d}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:u.map(f)},...Object.values(l)]);r()},[u,m,i,d,f,o]),{isLoading:n,menu:s.map(r=>({...r,links:r.links.filter(t=>t.isDisplayed)}))}},Gs=ts(is)`
  border-radius: 50%;
  padding: ${({theme:n})=>n.spaces[2]};
  height: 2rem;
`,T=({isFullPage:n=!1})=>{const{menu:s}=v(),{formatMessage:a}=B(),{trackUsage:o}=ss(),{pathname:d}=ns(),{license:i}=es(),c=i?.features.map(t=>t.name),g={"content-releases":"cms-content-releases","review-workflows":"review-workflows",sso:"sso",auditLogs:"audit-logs","auditLogs-purchase-page":"audit-logs"},m=s.filter(t=>!t.links.every(l=>l.isDisplayed===!1)).map(t=>({...t,title:t.intlLabel,links:t.links.map(l=>({...l,id:l.id,title:l.intlLabel,name:l.id,to:l.to.startsWith("/")?l.to:`/settings/${l.to}`}))})),f=a({id:"global.settings",defaultMessage:"Settings"}),r=t=>()=>{o("willNavigate",{from:d,to:t})};return e.jsxs(p.Main,{"aria-label":f,children:[!n&&e.jsxs(e.Fragment,{children:[e.jsx(p.Header,{label:f}),e.jsx(N,{})]}),e.jsxs(p.Content,{children:[n&&e.jsxs(e.Fragment,{children:[e.jsx(p.Header,{label:f}),e.jsx(N,{})]}),e.jsx(p.Sections,{children:m.map(t=>e.jsx(p.Section,{label:a(t.intlLabel),children:t.links.map(l=>e.jsx(p.Link,{to:l.to,onClick:r(l.to),label:a(l.intlLabel),endAction:e.jsxs(e.Fragment,{children:[l?.licenseOnly&&e.jsx(as,{fill:(c||[]).includes(g[l.id])?"primary600":"neutral300",width:"1.5rem",height:"1.5rem"}),l?.hasNotification&&e.jsx(Gs,{"aria-label":"Notification",backgroundColor:"primary600",textColor:"neutral0",children:"1"})]}),children:a(l.intlLabel)},l.id))},t.id))})]})]})},Ws=()=>{const n=rs("/settings/:settingId/*"),{formatMessage:s}=B(),{isLoading:a}=v(),o=os();return a?e.jsx(k.Loading,{}):n?.params.settingId?e.jsxs(cs.Root,{sideNav:e.jsx(T,{}),children:[e.jsx(k.Title,{children:s({id:"global.settings",defaultMessage:"Settings"})}),e.jsx(ds,{display:{initial:"block",medium:"none"},paddingLeft:P,paddingRight:P,paddingTop:P,children:e.jsx(us,{fallback:"/settings"})}),e.jsx(ms,{})]}):o?e.jsxs(e.Fragment,{children:[e.jsx(k.Title,{children:s({id:"global.settings",defaultMessage:"Settings"})}),e.jsx(p.PageWrapper,{children:e.jsx(T,{isFullPage:!0})})]}):e.jsx(ls,{to:"application-infos"})};export{Ws as Layout};
